<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EpiNLP Buider: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">EpiNLP Buider<span id="projectnumber">&#160;1.1.0</span>
   </div>
   <div id="projectbrief">A Python package for the end-to-end creation of NLP programs for ACT Health.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('index.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">EpiNLP Buider Documentation</div></div>
</div><!--header-->
<div class="contents">
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
<blockquote>
<h1 id="act-health-epidemiology-nlp-program-builder-epinlp-builder-">ACT Health Epidemiology NLP Program Builder (EpiNLP Builder)</h1>
<p>This package builds customised Natural Language Processing (NLP) programs for classifying free text snippets based on the presence of a specified characteristic. These NLP programs provide binary classifications of free text based on Linguistic Analysis and Machine Learning techniques. The output of these programs is an additional variable, in an existing data set containing free text, indicating a classification of the free text. This project was initially created to identify Emergency Department presentations related to suicide or self-harm from triage notes. In the case of suicide or self-harm related Emergency Department presentations, this classification process is more efficient than manual annotation, more precise than keyword searching, and more comprehensive than classifying based on ICD-10 clinical codes. The NLP programs are customised by the choice of annotated data, demographic, data size and distribution, linguistic analysis techniques and machine learning algorithm. This enables users to create and use NLP programs optimised to their needs. </p>
<p>Disclaimer: This software package was developed during a proof-of-concept project. The NLP techniques included do not claim to be cutting edge or comprehensive. This software package is useful for experimentation with and exploration of NLP programs but may not be suited to large-scale implementations.</p>
<h2 id="repository-structure">Repository Structure</h2>
<p>The directories (D) and packages (P) within this repository are structured as follows:</p>
<pre><code class="lang-text">├── data                (D) # A convenient location <span class="hljs-keyword">to</span> store test data. 
├── model               (P) # Save location <span class="hljs-keyword">for</span> NLP programs.                  
├── <span class="hljs-keyword">package</span>             (P) # The backend <span class="hljs-keyword">of</span> the program builder.
│   ├── Importer        (P) # The <span class="hljs-keyword">component</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">package</span> which imports data.
|   |   └──extractors   (P) # The <span class="hljs-keyword">component</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">package</span> which extracts specified data. 
│   ├── evaluate        (P) # The <span class="hljs-keyword">component</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">package</span> which evaluates NLP programs.
│   ├── mlearn          (P) # The <span class="hljs-keyword">component</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">package</span> which utilises a machine learning algorithm.
│   └── vectorise       (P) # The <span class="hljs-keyword">component</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">package</span> which vectorizes free <span class="hljs-literal">text</span>.
└── tests               (P) # Tests <span class="hljs-keyword">for</span> <span class="hljs-symbol">'package</span>' <span class="hljs-keyword">and</span> its sub-packages.
</code></pre>
<h2 id="dependencies">Dependencies</h2>
<p>All code is written in Python 3.13.3. Dependencies can be found in requirements.txt.</p>
<p>Ensure that &#39;python&#39; is set as a path variable or that the terminal being used is Anaconda PowerShell.</p>
<h2 id="set-up">Set up</h2>
<h3 id="requirements">Requirements</h3>
<p>To run this project, you will need <a href="https://git-scm.com">Git</a> and <a href="https://www.python.org/downloads/">Python</a> installed on your computer.</p>
<h3 id="installation">Installation</h3>
<p>Complete the following steps once, when first installing the repository. If you are using multiple python projects on your machine, consider creating a virtual environment for this project.</p>
<p>To install this project, open a terminal in the location you wish to store this repository. Run the following command:</p>
<pre><code class="lang-text">git <span class="hljs-keyword">clone</span> <span class="hljs-title">https</span>://github.com/George-McNamara-Gov/EpiNLPpb.git
</code></pre>
<p>Then navigate into this repository by running:</p>
<pre><code class="lang-text"><span class="hljs-built_in">cd</span> EpiNLPpb
</code></pre>
<p>Next use Python&#39;s default dependency manager &#39;pip&#39; to install this project&#39;s dependencies by running:</p>
<pre><code class="lang-text">pip <span class="hljs-keyword">install</span> -r requirements.txt
</code></pre>
<p>If the above command returns an error and you are trying to install through a proxy server, instead run:</p>
<pre><code class="lang-text">pip install --proxy http://<span class="hljs-symbol">&lt;USERNAME&gt;</span>:<span class="hljs-symbol">&lt;PASSWORD&gt;</span>@<span class="hljs-symbol">&lt;PROXY&gt;</span>:<span class="hljs-symbol">&lt;PORT&gt;</span> --trusted-host pypi.org --trusted-host <span class="hljs-keyword">files</span>.pythonhosted.org -r requirements.txt
</code></pre>
<p>Finally, you will need to download dictionaries from NLTK by running:</p>
<pre><code class="lang-text"><span class="hljs-keyword">python</span> -m nltk_install
</code></pre>
<p>If the above command returns an error and you are trying to install through a proxy server, instead run:</p>
<pre><code class="lang-text"><span class="hljs-keyword">python</span> -<span class="hljs-keyword">m</span> nltk_install_proxy <span class="hljs-symbol">&lt;USERNAME&gt;</span> <span class="hljs-symbol">&lt;PASSWORD&gt;</span> <span class="hljs-symbol">&lt;PROXY&gt;</span> <span class="hljs-symbol">&lt;PORT&gt;</span>
</code></pre>
<h2 id="usage">Usage</h2>
<p>To use the program builder, import the NLP class from package/base.py.</p>
<pre><code class="lang-text"><span class="hljs-keyword">from</span> EpiNLPpb.<span class="hljs-keyword">package</span>.base <span class="hljs-keyword">import</span> NLP
</code></pre>
<p>The NLP class contains all the functionality required to create, evaluate, export, and use an NLP program. To do this, first create an NLP object with the desired customisations.</p>
<pre><code class="lang-text">nlp = NLP(
    name= <span class="hljs-string">'program name'</span>,
    fileLocations= [<span class="hljs-string">'/path/to/data/file1'</span>, <span class="hljs-string">'/path/to/data/file2'</span>],
    dateColumnLabel= <span class="hljs-string">'date column label'</span>,
    hospitalColumnLabel= <span class="hljs-string">'hospital column label'</span>,
    sexColumnLabel= <span class="hljs-string">'sex column label'</span>,
    ageColumnLabel= <span class="hljs-string">'age column label'</span>,
    textFieldColumnLabels= [<span class="hljs-string">'text field 1 column label'</span>, <span class="hljs-string">'text field 2 column label'</span>],
    flagColumnLabel= <span class="hljs-string">'flag column label'</span>,
    ageBounds= (15, 60),     <span class="hljs-comment"># (minimum age, maximum age)</span>
    hospital= <span class="hljs-string">'CHHS'</span>, <span class="hljs-comment">#hospital</span>
    sex= 1, <span class="hljs-comment"># 0 for persons, 1 for male, 2 for female</span>
    yearBounds= (2017, 2021),   <span class="hljs-comment"># (earliest year, latest year)</span>
    trainSize= 15000,  <span class="hljs-comment">#amount of training data</span>
    trainDist= <span class="hljs-string">'TRAIN_DIST'</span>,
    <span class="hljs-built_in">test</span>Size= 2000,   <span class="hljs-comment">#amount of testing data</span>
    <span class="hljs-built_in">test</span>Dist= <span class="hljs-string">'TEST_DIST'</span>,
    tokeniser= <span class="hljs-string">'tokeniser'</span>,
    preLAChanges= [<span class="hljs-string">'pre LA change 1'</span>, <span class="hljs-string">'pre LA change 2'</span>],
    tokenLevelLA= [<span class="hljs-string">'token level 1'</span>],
    textLevelLA= [<span class="hljs-string">'text level 1'</span>, <span class="hljs-string">'text level 2'</span>, <span class="hljs-string">'text level 3'</span>],
    corpusLevelLA= <span class="hljs-string">'corpus level technique'</span>,
    mlAlgType= <span class="hljs-string">'ml algorithm type'</span>,
    macLearnInput= {
        <span class="hljs-string">'ml alg param 1'</span> : 0.01,
        <span class="hljs-string">'ml alg param 2'</span> : 15
    }
)
</code></pre>
<p>An NLP object can also be created using dictionaries containing constructor arguments for the Importer, Vectorise, and MLearn objects. If an argument dictionary is provided for Importer, Vectorise, or MLearn, the related keyword arguments provided to the NLP constructor will be ignored.</p>
<pre><code>nlp = NLP(
    name= <span class="hljs-symbol">'program</span> name',
    imp_arg_dict= {
        <span class="hljs-symbol">'fileLocations</span>' : ['/<span class="hljs-type">path</span>/to/data/file1', '/path/to/data/file2'],
        <span class="hljs-symbol">'dateColumnLabel</span>' : '<span class="hljs-type">date</span> column label',
        <span class="hljs-symbol">'hospitalColumnLabel</span>' : '<span class="hljs-type">hospital</span> column label',
        <span class="hljs-symbol">'sexColumnLabel</span>' : '<span class="hljs-type">sex</span> column label',
        <span class="hljs-symbol">'ageColumnLabel</span>' : '<span class="hljs-type">age</span> column label',
        <span class="hljs-symbol">'textFieldColumnLabels</span>' : ['<span class="hljs-type">text</span> field <span class="hljs-number">1</span> column label', <span class="hljs-symbol">'text</span> field <span class="hljs-number">2</span> column label'],
        <span class="hljs-symbol">'flagColumnLabel</span>' : '<span class="hljs-type">flag</span> column label',
        <span class="hljs-symbol">'ageBounds</span>' : (15, 60),
        <span class="hljs-symbol">'hospital</span>' : '<span class="hljs-type">CHHS</span>',
        <span class="hljs-symbol">'sex</span>' : 1,
        <span class="hljs-symbol">'yearBounds</span>' : (2017, 2021),
        <span class="hljs-symbol">'trainSize</span>' : 15000,
        <span class="hljs-symbol">'trainDist</span>' : '<span class="hljs-type">TRAIN_DIST</span>',
        <span class="hljs-symbol">'testSize</span>' : 2000,
        <span class="hljs-symbol">'testDist</span>' : '<span class="hljs-type">TEST_DIST</span>'
    },
    vect_arg_dict= {
        <span class="hljs-symbol">'tokeniser</span>' : '<span class="hljs-type">tokeniser</span>',
        <span class="hljs-symbol">'preLAChanges</span>' : ['<span class="hljs-type">pre</span> LA change <span class="hljs-number">1</span>', <span class="hljs-symbol">'pre</span> LA change <span class="hljs-number">2</span>'],
        <span class="hljs-symbol">'tokenLevelLA</span>' : ['<span class="hljs-type">token</span> level <span class="hljs-number">1</span>'],
        <span class="hljs-symbol">'textLevelLA</span>' : ['<span class="hljs-type">text</span> level <span class="hljs-number">1</span>', <span class="hljs-symbol">'text</span> level <span class="hljs-number">2</span>', <span class="hljs-symbol">'text</span> level <span class="hljs-number">3</span>'],
        <span class="hljs-symbol">'corpusLevelLA</span>' : '<span class="hljs-type">corpus</span> level technique',
    },
    ml_arg_dict= {
        <span class="hljs-symbol">'mlAlgType</span>' : '<span class="hljs-type">ml</span> algorithm <span class="hljs-keyword">type</span>',
        <span class="hljs-symbol">'macLearnInput</span>' : {
            <span class="hljs-symbol">'ml</span> alg param <span class="hljs-number">1</span>' : 0.01,
            <span class="hljs-symbol">'ml</span> alg param <span class="hljs-number">2</span>' : 15
        }
    }
)
</code></pre><p>Information about the format of and options for each parameter in the NLP constructor can be found in the EpiNLP Builder Technical Notes and the Release Notes for Update 1.1.0.</p>
<p>Use the create method to build an NLP program with these desired customisations.</p>
<pre><code class="lang-text"><span class="hljs-selector-tag">nlp</span><span class="hljs-selector-class">.create</span>()
</code></pre>
<p>Use the evaluateNLP method to evaluate this NLP program.</p>
<pre><code class="lang-text"><span class="hljs-selector-tag">nlp</span><span class="hljs-selector-class">.evaluateNLP</span>()
<span class="hljs-selector-tag">nlp</span><span class="hljs-selector-class">.viewEvaluation</span>()
</code></pre>
<p>Use the exportNLP method to save this NLP program in the model directory.</p>
<pre><code class="lang-text"><span class="hljs-selector-tag">nlp</span><span class="hljs-selector-class">.exportNLP</span>()
</code></pre>
<p>Use the annotateDataCSV or annotateDataXLSX methods to use this NLP program to annotate an existing data set.</p>
<pre><code class="lang-text">nlp.annotateDataCSV(
    '/path/to/existing/data/set.csv<span class="hljs-string">',
    ['</span><span class="hljs-built_in">text</span> <span class="hljs-keyword">field</span> <span class="hljs-number">1</span> <span class="hljs-keyword">column</span> label<span class="hljs-string">', '</span><span class="hljs-built_in">text</span> <span class="hljs-keyword">field</span> <span class="hljs-number">2</span> <span class="hljs-keyword">column</span> label<span class="hljs-string">'],
    '</span>label <span class="hljs-keyword">for</span> annotation <span class="hljs-keyword">column</span><span class="hljs-string">'
)</span>
</code></pre>
<p>Or</p>
<pre><code class="lang-text">nlp.annotateDataXLSX(
    '/path/to/existing/data/set.xlsx<span class="hljs-string">',
    '</span>sheet <span class="hljs-keyword">name</span><span class="hljs-string">',
    ['</span><span class="hljs-built_in">text</span> <span class="hljs-keyword">field</span> <span class="hljs-number">1</span> <span class="hljs-keyword">column</span> label<span class="hljs-string">', '</span><span class="hljs-built_in">text</span> <span class="hljs-keyword">field</span> <span class="hljs-number">2</span> <span class="hljs-keyword">column</span> label<span class="hljs-string">'],
    '</span>label <span class="hljs-keyword">for</span> annotation <span class="hljs-keyword">column</span><span class="hljs-string">'
)</span>
</code></pre>
<p>NLP programs can also be trained and evaluated in a cross-validate fashion using crossValidate.</p>
<pre><code>scores = nlp.crossValidate(
    <span class="hljs-number">5</span> # <span class="hljs-keyword">number</span> of folds to <span class="hljs-keyword">use</span> during cross-validation
)
<span class="hljs-built_in">print</span>(scores)
</code></pre><p>For more information about using the software package please consult the package documentation.</p>
<h2 id="tests">Tests</h2>
<p>A suite of tests is provided for the backend of this project implemented in the &#39;package&#39; directory. These tests are organised by module with tests for &#39;package/base&#39;, &#39;Importer&#39;, &#39;vectorise&#39;, &#39;vectorise/nltk&#39;, &#39;mlearn&#39;, and &#39;evaluate&#39;. To run the tests, open a terminal in the directory containing this repository and run:</p>
<pre><code class="lang-text">python -m EpiNLPpb<span class="hljs-selector-class">.tests</span><span class="hljs-selector-class">.test</span>
</code></pre>
<h2 id="development">Development</h2>
<p>This project began development through the Vacation Study Program 2023-24 run by the ACT Health Research Strategy Team. The development continues in the ACT Health Directorate, Epidemiology Section, Knowledge Translation and Health Outcomes Team. All development is internal to ACT Health. For enquiries, please email the following address:</p>
<p>epicentre@act.gov.au</p>
<h2 id="credits">Credits</h2>
<p>This software uses the following open source packages:</p>
<ul>
<li>NLTK</li>
<li>Sci-Kit Learn</li>
</ul>
<p>This project was written by George McNamara.</p>
<p>This project was supervised by Glenn Draper, Dr Louise Freebairn, Dr Erin Walsh and Dr Gao Zhu.</p>
<p>The initial data for classifying ED records related to SSH was provided by Paul Mayers.</p>
<p>Technical support and problem solving was facilitated by Aidan Whitfield.</p>
<p>The documentation for this project was generated using <a href="https://www.doxygen.nl/index.html">Doxygen</a>.</p>
<h2 id="license">License</h2>
<p>EpiNLP Builder is free and open-source software released under the <a href="https://github.com/George-McNamara-Gov/ACTHealthNLPProgramBuilder/blob/main/LICENSE">GPL</a> (General Public License).</p>
</blockquote>
</div><!-- doc-content -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on <span class="timestamp"></span> for EpiNLP Buider by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
